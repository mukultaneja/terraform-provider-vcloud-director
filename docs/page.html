<!-- ***************************************************************** -->
<!-- * terraform-provider-vcloud-director -->
<!-- * Copyright (c) 2017 VMware, Inc. All Rights Reserved. -->
<!-- * SPDX-License-Identifier: BSD-2-Clause -->
<!-- ******************************************************************-->
<!doctype html>
<html>

<head>
    <title>Terraform Provider vCloud Director</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" />
    <style type="text/css">
    pre code {
        background-color: #eee;
        border: 1px solid #999;
        display: block;
        padding: 0px;
    }

    .page-header {
        color: #fff;
        text-align: center;
        background-color: #159957;
        background-image: linear-gradient(120deg, #155799, #159957);
        padding: 4.5rem 6rem;
        height: 200px;
    }

    .overview h2,
    .feature-1 h3,
    .feature-2 h3,
    .feature-3 h3,
    .feature-4 h3,
    .centos h4,
    .macos h4 {
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: normal;
        color: #159957;
    }

    a {
        list-style: none
    }
    </style>
</head>

<body>
    <div class="container-fluid p-4">
        <div class="page-header h-100 mb-4">
            <div class="row">
                <div class="col">
                    <h1 class="text-center">Terraform Provider for vCloud Director</h1>
                </div>
            </div>
        </div>
        <hr />
        <div class="content h-100 mb-4">
            <div class="row ml-2">
                <div class="col">
                    <p>
                        <strong>Terraform Provider</strong> is a tool which enables operations such as create, update, and delete to manage infrastructure on <strong>vCloud Director</strong>.
                    </p>
                </div>
            </div>
        </div>
        <div class="overview mb-4 h-100">
            <div class="row">
                <div class="col">
                    <h2>Overview</h2>
                </div>
            </div>
            <hr />
            <div class="row ml-2">
                <div class="col" <p>
                    <strong>Terraform</strong> is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.
                    <strong>Terraform Provider</strong> is a tool which is based on Terraform and works with configuration files. These configuration files contain all the information which is relevant enough to perform <strong>create/update/read/delete</strong> operations on the resources available on vCloud Director.
                    </p>
                    <p>The current document covers the following <strong>Terraform Provider</strong> topics:</p>
                    <ol>
                        <li>
                            <a href="#feature-1" class="feature-1">Architecure</a>
                        </li>
                        <li>
                            <a href="#feature-2" class="feature-2">Installation and Configuration</a>
                            <ul>
                                <li>
                                    <a href="#centos" class="centos">Centos 7 Setup</a>
                                    <ul>
                                        <li>
                                            Install Python 3.6
                                        </li>
                                        <li>
                                            Install GO
                                        </li>
                                        <li>
                                            Install Terraform
                                        </li>
                                        <li>
                                            Configure Terraform Provider Binary
                                        </li>
                                        <li>
                                            Install Pyvtf
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#macos" class="macos">MacOS Setup</a>
                                    <ul>
                                        <li>
                                            Install Python 3.6
                                        </li>
                                        <li>
                                            Install GO
                                        </li>
                                        <li>
                                            Install Terraform
                                        </li>
                                        <li>
                                            Configure Terraform Provider Binary
                                        </li>
                                        <li>
                                            Install Pyvtf
                                        </li>
                                    </ul>
                                </li>
                        </li>
                        <li>
                            <a href="use-cases.html">Use Cases</a>
                        </li>
                        <li>
                            <a href="#feature-3" class="feature-3">References</a>
                        </li>
                        <li>
                            <a href="#feature-4" class="feature-4">Report Issues</a>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="features h-100 mb-4">
            <div id="feature-1" class="feature-1">
                <div class="row">
                    <div class="col">
                        <h3>Terraform Provider Architecture</h3>
                    </div>
                </div>
                <hr />
                <div class="row ml-2">
                    <div class="col">
                        <p>
                            <strong>Terraform Provider</strong> has been developed using Python and GO. It uses Client-Server model inside the hood where the client has been written using GO and server has been written using Python language. The core reason to use two different languages is to make a bridge between Terraform and Pyvcloud API. Pyvcloud is the SDK developed by VMware and provides an medium to talk to vCloud Director. Terraform uses GO to communicate where Pyvcloud has been written in Python3.
                        </p>
                        <p>We are using GRPC Protocol to handle the communication between GO client and Python server.</p>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col-2"></div>
                    <div class="col-10">
                        <img class="ml-4" src="architecture.jpg" />
                    </div>
                </div>
            </div>
            <div id="feature-2" class="feature-2">
                <div class="row">
                    <div class="col">
                        <h3>Installaton and Configuration</h3>
                    </div>
                </div>
                <hr />
                <div id="centos" class="centos row ml-2">
                    <div class="col">
                        <h4>CentOS 7 Setup</h4>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col">
                        <ul>
                            <li>
                                <strong>Install Python3.6</strong>
                            </li>
                        </ul>
                        <pre class="ml-4 mr-4">
 <code>
 yum group install "Development Tools" -y
 yum install wget zlib-devel sqlite-devel openssl openssl-devel -y
 wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tgz
 tar -xvf Python*
 cd Python-3.6.4
 ./configure
 make
 make install
</code>
</pre>
                        <pre class="ml-4 mr-4">
<code>
 python3 --version // output --> Python 3.6.4
 pip3.6 --version // output --> pip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)
 </code>
 </pre>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col">
                        <ul>
                            <li><strong>Install GO</strong></li>
                        </ul>
                        <pre class="ml-4 mr-4">
 <code>
 cd /opt
 wget https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz
 tar -xvf go*
 export PATH=/opt/go/bin:$PATH
 export GOROOT=/opt/go
</code>
</pre>
                        <pre class="ml-4 mr-4">
<code>
 go version // output --> go version go1.9.4
 </code>
 </pre>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col">
                        <ul>
                            <li><strong>Install Terraform</strong></li>
                        </ul>
                        <pre class="ml-4 mr-4">
 <code>
 wget https://releases.hashicorp.com/terraform/0.11.4/terraform_0.11.4_linux_amd64.zip
 unzip terraform_0.11.4_linux_amd64.zip
 sudo mv terraform /usr/local/bin/
</code>
</pre>
                        <pre class="ml-4 mr-4">
<code>
 terraform --version // output --> Terraform version: 0.11.4
 </code>
 </pre>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col">
                        <ul>
                            <li><strong>Configure Terraform Provider Binary</strong></li>
                        </ul>
                        <p class="ml-4">
                            It is a binary code written in GO and managed by VMware. This binary will be consumed by Terraform CLI. Terraform CLI uses function of this binary to maintain the infrastructure on vCloud Director. This GO binary is a pure abstraction to Terraform CLI for all the subsequent parts of the architecture. Internally, this binary sends GRPC requests as per the operation (create/update/read/delete) to the server and notify the user about the response received from the server.
                        </p>
                        <p class="ml-4">
                            To get the GO Binary, use the following command and put the binary in '/usr/local/bin/'
                        </p>
                        <pre class="ml-4 mr-4">
 <code>
 cd /usr/local/bin/
 wget https://github.com/vmware/terraform-provider-vcloud-director/raw/master/builds/linux/terraform-provider-vcloud-director
 chmod +x terraform-provider-vcloud-director
 </code>
 </pre>
                    </div>
                </div>
                <div class="row ml-2">
                    <div class="col">
                        <ul>
                            <li><strong>Install Pyvtf</strong></li>
                        </ul>
                        <p class="ml-4">
                            Pyvtf is a Python Package by VMware which creates a python server on the client machine and responsible enough to handle GRPC requests from GO client. As per the <a href="#feature-1">Architecture</a>, it sits between GRPC and Pyvcloud API. It is an abstraction of Pyvcloud API and vCloud Director to the GO client. Once it receives a request from GO client, it connects with the vCloud Director using Pyvcloud API, does the appropriate processing and returns the response back to GO client. To install pyvtf on the system, use the following command.
                        </p>
                        <pre class="ml-4 mr-4">
 <code>
 pip3.6 install pyvtf
 </code>
</pre>
                        <pre class="ml-4 mr-4">
<code>
 pyvtf --version // output --> 0.4
 pyvtf --help
 </code>
 </pre>
                        <p class="ml-4">
                            To start/stop the python server through pyvtf, use following command,
                        </p>
                        <pre class="ml-4 mr-4">
 <code>
 pyvtf start/stop
 </code>
 </pre>
                    </div>
                </div>
            </div>
            <div id="macos" class="macos row ml-2">
                <div class="col">
                    <h4>MacOS 7 Setup</h4>
                </div>
            </div>
            <div class="row ml-2">
                <div class="col">
                    <ul>
                        <li>
                            <strong>Install Python3.6</strong>
                        </li>
                    </ul>
                    <pre class="ml-4 mr-4">
 <code>
 wget https://www.python.org/ftp/python/3.6.4/python-3.6.4-macosx10.6.pkg
</code>
</pre>
                    <p class="ml-4 mr-4">
                        Above command will download the Python 3.6 installer. Run the installer and follow the instructions to install Python 3.6. To check the current version of python, run the following command in terminal.
                    </p>
                    <pre class="ml-4 mr-4">
 <code>
 python3.6 --version // output --> 3.6.4
 pip3.6 --version // output --> pip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)

 </code>
 </pre>
                </div>
            </div>
            <div class="row ml-2">
                <div class="col">
                    <ul>
                        <li><strong>Install GO</strong></li>
                    </ul>
                    <pre class="ml-4 mr-4">
 <code>
 wget https://dl.google.com/go/go1.10.darwin-amd64.pkg
</code>
</pre>
<p class="ml-4 mr-4">
                        Above command will download the Go installer. Run the installer and follow the instructions to install Go. To check the current version of go, run the following command in terminal.
                    </p>
                    <pre class="ml-4 mr-4">
<code>
 go version // output --> go version go1.9.4 darwin/amd64
 </code>
 </pre>
                </div>
            </div>
            <div class="row ml-2">
                <div class="col">
                    <ul>
                        <li><strong>Install Terraform</strong></li>
                    </ul>
                    <pre class="ml-4 mr-4">
 <code>
 wget https://releases.hashicorp.com/terraform/0.11.4/terraform_0.11.4_darwin_amd64.zip
 unzip terraform_0.11.4_darwin_amd64.zip
 sudo mv terraform /usr/local/bin/
</code>
</pre>
                    <pre class="ml-4 mr-4">
<code>
 terraform --version // output --> Terraform version: 0.11.4
 </code>
 </pre>
                </div>
            </div>
            <div class="row ml-2">
                <div class="col">
                    <ul>
                        <li><strong>Configure Terraform Provider Binary</strong></li>
                    </ul>
                    <p class="ml-4">
                        It is a binary code written in GO and managed by VMware. This binary will be consumed by Terraform CLI. Terraform CLI uses function of this binary to maintain the infrastructure on vCloud Director. This GO binary is a pure abstraction to Terraform CLI for all the subsequent parts of the architecture. Internally, this binary sends GRPC requests as per the operation (create/update/read/delete) to the server and notify the user about the response received from the server.
                    </p>
                    <p class="ml-4">
                        To get the GO Binary, use the following command and put the binary in '/usr/local/bin/'
                    </p>
                    <pre class="ml-4 mr-4">
 <code>
 cd /usr/local/bin/
 wget https://github.com/vmware/terraform-provider-vcloud-director/raw/master/builds/mac/terraform-provider-vcloud-director
 chmod +x terraform-provider-vcloud-director
 </code>
 </pre>
                </div>
            </div>
            <div class="row ml-2">
                <div class="col">
                    <ul>
                        <li><strong>Install Pyvtf</strong></li>
                    </ul>
                    <p class="ml-4">
                        Pyvtf is a Python Package by VMware which creates a python server on the client machine and responsible enough to handle GRPC requests from GO client. As per the <a href="#feature-1">Architecture</a>, it sits between GRPC and Pyvcloud API. It is an abstraction of Pyvcloud API and vCloud Director to the GO client. Once it receives a request from GO client, it connects with the vCloud Director using Pyvcloud API, does the appropriate processing and returns the response back to GO client. To install pyvtf on the system, use the following command.
                    </p>
                    <pre class="ml-4 mr-4">
 <code>
 pip3.6 install pyvtf
 </code>
</pre>
                    <pre class="ml-4 mr-4">
<code>
 pyvtf --version // output --> 0.4
 pyvtf --help
 </code>
 </pre>
                    <p class="ml-4">
                        To start/stop the python server through pyvtf, use following command,
                    </p>
                    <pre class="ml-4 mr-4">
 <code>
 pyvtf start/stop
 </code>
 </pre>
                </div>
            </div>
        </div>
        <div id="feature-3" class="feature-3">
            <div class="row ml-2">
                <div class="col">
                    <h3>References</h3>
                    <hr />
                    <ul>
                        <li>
                            <a href="https://terraform.io" target="_blank">Terrafom Docs</a>
                        </li>
                        <li>
                            <a href="http://vmware.github.io/pyvcloud/" target="_blank">Pyvcloud Docs</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="feature-4" class="feature-4">
            <div class="row ml-2">
                <div class="col">
                    <h3>Report Issues</h3>
                    <hr />
                    <p class="ml-2">
                        Please refer to
                        <a href="https://github.com/vmware/terraform-provider-vcloud-director" target="_blank">this</a> to report issues and know more details about the project.
                    </p>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript">
$("document").ready(function() {
    var links = ['.feature-1', '.feature-2', '.centos', '.macos', '.feature-3', '.feature-4'];

    $.each(links, function(index, value) {
        $(value).click(function(e) {
            $('html, body').animate({
                scrollTop: $($.attr(this, 'href')).offset().top
            }, 1200);

            return false;
        });
    });
});
</script>

</html>